document.addEventListener('DOMContentLoaded',()=>{const galleryItems=document.querySelectorAll('.gallery-item');const lightbox=document.querySelector('.lightbox');const lightboxImg=document.getElementById('lightbox-img');const lightboxCaption=document.getElementById('lightbox-caption');const lightboxClose=document.querySelector('.lightbox-close');const lightboxPrev=document.querySelector('.lightbox-prev');const lightboxNext=document.querySelector('.lightbox-next');let currentIndex=0;let images=[];const observerOptions={root:null,rootMargin:'0px',threshold:0.1};const galleryObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('is-visible')}else{entry.target.classList.remove('is-visible')}})},observerOptions);galleryItems.forEach((item,index)=>{const img=item.querySelector('img');const title=item.querySelector('.gallery-overlay h3').textContent;const description=item.querySelector('.gallery-overlay p').textContent;images.push({src:img.src,alt:img.alt,title:title,description:description});item.addEventListener('click',()=>{currentIndex=index;openLightbox(currentIndex)});galleryObserver.observe(item)});function openLightbox(index){if(images[index]){lightboxImg.src=images[index].src;lightboxImg.alt=images[index].alt;lightboxCaption.innerHTML=`<h3>${images[index].title}</h3><p>${images[index].description}</p>`;lightbox.classList.add('active');document.body.style.overflow='hidden'}}
function closeLightbox(){lightbox.classList.remove('active');document.body.style.overflow='auto'}
function showNextImage(){currentIndex=(currentIndex+1)%images.length;openLightbox(currentIndex)}
function showPrevImage(){currentIndex=(currentIndex-1+images.length)%images.length;openLightbox(currentIndex)}
lightboxClose.addEventListener('click',closeLightbox);lightboxNext.addEventListener('click',showNextImage);lightboxPrev.addEventListener('click',showPrevImage);document.addEventListener('keydown',(e)=>{if(lightbox.classList.contains('active')){if(e.key==='Escape'){closeLightbox()}else if(e.key==='ArrowRight'){showNextImage()}else if(e.key==='ArrowLeft'){showPrevImage()}}});lightbox.addEventListener('click',(e)=>{if(e.target===lightbox){closeLightbox()}})})